# Segment Analytics Event Specification

Segment analytics events are used by Segment customers to collect behavioural information from end users on web, mobile and server side platforms.

This file explains how Segment events are structured. This information should be used when designing Segment Destinations, specially Actions and Fields.

## Segment Event Types

**`track()`**, **`page()`** and **`screen()`** events are used to collect information about what a user did.
**`identify()`** events are used to collect information about the user themselves.

- **`track()`** – Records that **a specific action happened**  
  Example: `"Order Completed"`, `"Link Clicked"`
  track() calls are usually made when the customer wants to understand more about what the user has been doing.

- **`page()`** – Logs a **web page view**  
  Is usually triggered when a web page loads.

- **`screen()`** – Logs a **mobile app screen view**  
  Same purpose as `page()`, but for native mobile app screens.

- **`identify()`** – Collects **identifiers** and user **traits**  
  Example traits: email, name, plan type.  
  identify() calls are usually made when a user signs in, signs up, or updates their profile in some way.

- **`group()`** – Associates a user with a **group or account**  
  Example: company, team, or organization.  
  Can include group-level traits.

## Segment event attributes

Attributs in Segment events should always be named in snake_case. Sometimes Segment documentation actually provides examples of attribute names in camelCase, but these should be replaced with the snake_case version of the attribute name.

Only track() event `event` and page() event `name` values should be in Capital Case.

## identifiers

All Segment analytics events must include an `anonymousId` and/or `userId`. Events without at least one of these will be rejected.
These identifiers must be at the root of the payload.

### 3. `anonymousId` (string, required if `userId` not present)

- **Description:** A unique, often auto-generated identifier for an **anonymous** user.
- **Generated by:** Segment client SDKs (JavaScript snippet, Mobile SDKs, etc.).
- **Usage notes:**
  - Use when no other identifier is available.
  - Can be set manually.
  - Either `anonymousId` **or** `userId` must be present (both can be included).

### 4. `userId` (string, required if `anonymousId` not present)

- **Description:** Identifier provided by the customer when the user becomes **known**.
- **User becomes known when they:**
  1. Sign in
  2. Register
  3. Update profile details

## Common attributes

## Segment Common Fields

- **`integrations`** – **Optional**

  - **Type:** Object
  - A dictionary specifying which destinations to enable or disable for this message.
  - See [Destinations field docs](https://segment.com/docs/connections/spec/common/#integrations) for details.

- **`messageId`** – **Implicit** (set automatically by Segment, but can be set manually by the customer)

  - **Type:** String
  - Unique identifier for each message, allowing tracking across the API.
  - Limited to 100 characters.
  - a messageId will always be present in any payload before it gets passed on to a Destination for processing.
  - Segment's ingestion pipeline will drop events if the second event has the same messageId.

- **`timestamp`** – **Optional**
  - **Type:** Date (ISO-8601 string)
  - Timestamp when the event occurred.
  - Defaults to the current time if omitted.
  - Use for backfilled data to record past events accurately.
  - See [Timestamps docs](https://segment.com/docs/connections/spec/common/#timestamps) for details.

## Context

All Segment analytics events can contain a `context` object. This object can include information about the environment from where the event was sent, or it can contain additional information about the user.

| Field                    | Type    | Description                                                                                                                                                     | Analytics.js | Analytics-iOS | Analytics-Android |
| ------------------------ | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ------------- | ----------------- |
| app                      | Object  | Dictionary of information about the current application, containing name, version, and build. Collected automatically when possible.                            | ❌           | ✅            | ✅                |
| app.name                 | String  | Application name                                                                                                                                                | ❌           | ✅            | ✅                |
| app.version              | String  | Application version                                                                                                                                             | ❌           | ✅            | ✅                |
| app.build                | String  | Application build                                                                                                                                               | ❌           | ✅            | ✅                |
| campaign                 | Object  | Dictionary of information about the campaign that resulted in the API call, containing name, source, medium, term, content, and any other custom UTM parameter. | ✅           | ❌            | ❌                |
| campaign.name            | String  | UTM campaign name value                                                                                                                                         | ✅           | ❌            | ❌                |
| campaign.source          | String  | UTM campaign source value                                                                                                                                       | ✅           | ❌            | ❌                |
| campaign.medium          | String  | UTM campaign medium value                                                                                                                                       | ✅           | ❌            | ❌                |
| campaign.term            | String  | UTM campaign term value                                                                                                                                         | ✅           | ❌            | ❌                |
| campaign.content         | String  | UTM campaign content value                                                                                                                                      | ✅           | ❌            | ❌                |
| device                   | Object  | Dictionary of information about the device, containing id, advertisingId, manufacturer, model, name, type, and version.                                         | ❌           | ✅            | ✅                |
| device.type              | String  | Device type                                                                                                                                                     | ❌           | ✅            | ✅                |
| device.id                | String  | Device ID. IDFV or Android ID                                                                                                                                   | ❌           | ✅            | ✅                |
| device.advertisingId     | String  | Advertising ID. IDFA or Android Ad ID                                                                                                                           | ❌           | ✅            | ✅                |
| device.adTrackingEnabled | Boolean | Ad tracking enabled                                                                                                                                             | ❌           | ✅            | ✅                |
| device.manufacturer      | String  | Device manufacturer                                                                                                                                             | ❌           | ✅            | ✅                |
| device.model             | String  | Device model                                                                                                                                                    | ❌           | ✅            | ✅                |
| device.name              | String  | Device name                                                                                                                                                     | ❌           | ✅            | ✅                |
| ip                       | String  | Current user’s IP address                                                                                                                                       | ✅           | ✅            | ✅                |
| library                  | Object  | Dictionary of information about the library making the requests, containing name and version                                                                    | ✅           | ✅            | ✅                |
| library.name             | String  | Library name                                                                                                                                                    | ✅           | ✅            | ✅                |
| library.version          | String  | Library version                                                                                                                                                 | ✅           | ✅            | ✅                |
| locale                   | String  | Locale string for the current user, e.g., en-US                                                                                                                 | ✅           | ✅            | ✅                |
| network                  | Object  | Dictionary of information about the current network connection                                                                                                  | ❌           | ✅            | ✅                |
| network.bluetooth        | Boolean | Bluetooth status                                                                                                                                                | ❌           | ❌            | ✅                |
| network.carrier          | String  | Carrier name                                                                                                                                                    | ❌           | ✅            | ✅                |
| network.cellular         | Boolean | Cellular connection                                                                                                                                             | ❌           | ✅            | ✅                |
| network.wifi             | Boolean | Wifi connection                                                                                                                                                 | ❌           | ✅            | ✅                |
| os                       | Object  | Dictionary of information about the operating system, containing name and version                                                                               | ✅           | ✅            | ✅                |
| os.name                  | String  | OS name                                                                                                                                                         | ✅           | ✅            | ❌                |
| os.version               | String  | OS version                                                                                                                                                      | ✅           | ✅            | ❌                |
| page                     | Object  | Dictionary of information about the current page in the browser, containing path, referrer, search, title, and url                                              | ✅           | ❌            | ❌                |
| page.path                | String  | Page path                                                                                                                                                       | ✅           | ❌            | ❌                |
| page.referrer            | String  | Page referrer                                                                                                                                                   | ✅           | ❌            | ❌                |
| page.search              | String  | Page search string                                                                                                                                              | ✅           | ❌            | ❌                |
| page.title               | String  | Page title                                                                                                                                                      | ✅           | ❌            | ❌                |
| page.url                 | String  | Page URL                                                                                                                                                        | ✅           | ❌            | ❌                |
| screen                   | Object  | Dictionary of information about the device’s screen, containing density, height, and width                                                                      | ❌           | ✅            | ✅                |
| screen.density           | Number  | Screen density                                                                                                                                                  | ❌           | ❌            | ✅                |
| screen.height            | Number  | Screen height                                                                                                                                                   | ❌           | ✅            | ✅                |
| screen.width             | Number  | Screen width                                                                                                                                                    | ❌           | ✅            | ✅                |
| userAgent                | String  | User agent of the device making the request                                                                                                                     | ✅           | ❌            | ✅                |
| userAgentData            | Object  | User agent data of the device. Contains brands, mobile, platform, and optionally bitness, model, platformVersion, uaFullVersion, fullVersionList, wow64.        | ✅           | ❌            | ❌                |
| timezone                 | String  | Timezones sent as tzdata strings to add user timezone information                                                                                               | ✅           | ✅            | ✅                |
| groupId                  | String  | Group / Account ID. Useful in B2B use cases to attribute calls to a company or account                                                                          | ❌           | ❌            | ❌                |
| channel                  | String  | Where the request originated from: server, browser, or mobile                                                                                                   | ❌           | ❌            | ❌                |
| ip\*                     | String  | Current user’s IP address (marked with \* in original chart)                                                                                                    | ✅           | ✅            | ✅                |

❌ = not collected automatically by the Segment SDK
✅ = collected automatically by the Segment SDK

### Context traits

Customers often want to collect user traits in track(), page() or screen() events rather than in identify() events as it can make instrumentation of their websites, mobile apps and back end services easier.
To accomodate this, it's possible to include the traits object directly in the context object in track(), page() and screen() events. Anything that can be collected in an identify() event's traits object can be collected in `context.traits`

## track events

Customers use Segment track() events when they want to collect information about an end user's usage on their platform, which could be a website front end, mobile app, back end service, or even another Saas platform.

# Segment `track()` Event Payload Structure

## Fields

### 1. `type` (string, **required**)

- **Description:** Indicates that the payload is a `track()` event.
- **Allowed value:** `"track"`

### 2. `event` (string, **required**)

- **Description:** Name of the event in **"Object Action"** notation.
  - **Object:** The entity.
  - **Action:** Past-tense verb.
- **Examples:** `"Link Clicked"`, `"Order Completed"`.
- **Notes:** See Segment’s [Track Spec](https://segment.com/docs/connections/spec/track/) as well as the [Ecommerce Spec](https://segment.com/docs/connections/spec/ecommerce/v2/) for information on how to name ecommerce events.

### 3. `properties` (object, optional)

- **Description:** A JSON object with event-specific details.
- **Best practices:**
  - Keep the structure flat (avoid deeply nested objects).
  - Only include relevant information for the event.
- **Example (for `"Link Clicked"` event):**
  ```json
  {
    "url": "https://example.com",
    "linkText": "Learn More"
  }
  ```
- See [Ecommerce Spec](https://segment.com/docs/connections/spec/ecommerce/v2/) for details of properties Segment recommends for certain types of ecommerce events

# Segment `page()` Event Reference

Segment's `page()` events allow you to collect information about page views on your platform. This can include activity on websites, web apps, or any other interface where users navigate between pages.

## `page()` Event Payload Structure

A `page()` event payload contains the following fields:

### 1. `type` (string, **required**)

- **Description:** Identifies the payload as a `page()` event.
- **Allowed value:** `"page"`

### 2. `name` (string, optional)

- **Description:** Name of the page being viewed in **"Capital Case"**.
- **Examples:**
  - `"Home"`
  - `"Pricing"`

### 3. `category` (string, optional)

- **Description:** The category of the page. Useful for grouping similar pages.
- **Examples:**
  - `"Blog"`
  - `"Account"`

### 4. `properties` (object, optional)

- **Description:** A JSON object containing additional details about the page. The following common properties may be automatically included if Segment's Javascript library is being used to trigger the page() event:

| Property   | Type          | Description                                                                                             |
| ---------- | ------------- | ------------------------------------------------------------------------------------------------------- |
| `path`     | String        | Path portion of the page’s URL. Defaults to `location.pathname` from the DOM API.                       |
| `referrer` | String        | Previous page’s full URL. Equivalent to `document.referrer`.                                            |
| `search`   | String        | Query string portion of the page’s URL. Equivalent to `location.search`.                                |
| `title`    | String        | Page’s title. Equivalent to `document.title`.                                                           |
| `url`      | String        | Page’s full URL. Segment first looks for the canonical URL, otherwise uses `location.href`.             |
| `keywords` | Array[String] | Keywords describing the page content, similar to HTML meta keywords. Mainly used by content publishers. |

- **Best Practices:**
  - Keep the structure flat (avoid deeply nested objects).
  - Only include relevant information for the page view.
- **Example:**

```json
{
  "url": "https://example.com/pricing",
  "title": "Pricing Page",
  "path": "/pricing"
}
```

# Segment `identify()` Event Reference

Segment's `identify()` calls allow you to associate a user with their actions and store information about them. This is commonly used to track traits such as email, name, subscription plan, or other profile information.

## `identify()` Payload Structure

An `identify()` payload contains the following fields:

### 1. `type` (string, **required**)

- **Description:** Identifies the payload as an `identify()` event.
- **Allowed value:** `"identify"`

### 2. `traits` (object, optional)

- **Description:** A JSON object containing information specific to a user (attributes or traits). The table below lists reserved/common traits that are recommended for standardized data collection. Customers can use these names when collecting corresponding information, or define custom traits in any snake_case format.

| Trait         | Type   | Description                                                                                   |
| ------------- | ------ | --------------------------------------------------------------------------------------------- |
| `id`          | String | Unique ID in your database for the user.                                                      |
| `email`       | String | Email address of the user.                                                                    |
| `name`        | String | Full name of the user. If only first and last name are provided, Segment auto-fills this.     |
| `first_name`  | String | First name of the user.                                                                       |
| `last_ame`    | String | Last name of the user.                                                                        |
| `username`    | String | User’s unique username, e.g., Twitter or GitHub handle.                                       |
| `phone`       | String | Phone number of the user.                                                                     |
| `avatar`      | String | URL to an avatar image for the user.                                                          |
| `birthday`    | Date   | User’s birthday.                                                                              |
| `gender`      | String | Gender of the user.                                                                           |
| `title`       | String | Job title or role of the user.                                                                |
| `description` | String | Description of the user.                                                                      |
| `website`     | String | Website of the user.                                                                          |
| `age`         | Number | Age of the user.                                                                              |
| `address`     | Object | Street address optionally containing: city, country, postal_ode, state, or street.            |
| `company`     | Object | Company the user represents, optionally containing: name, id, industry, employee_count, plan. |
| `created_at`  | Date   | Date the user’s account was first created (ISO-8601 format).                                  |

- **Best Practices:**

  - Only include traits that you plan to use.
  - Keep trait keys consistent across calls.
  - Avoid deeply nested structures unless necessary.

- **Example:**

```json
{
  "userId": "12345",
  "traits": {
    "email": "jane.doe@example.com",
    "name": "Jane Doe",
    "first_name": "Jane",
    "last_ame": "Doe",
    "username": "janedoe",
    "phone": "+1234567890",
    "avatar": "https://example.com/avatar.jpg",
    "birthday": "1990-05-15",
    "gender": "female",
    "title": "VP of Engineering",
    "description": "Tech lead and content creator",
    "website": "https://janedoe.com",
    "age": 34,
    "address": {
      "street": "123 Main St",
      "city": "San Francisco",
      "state": "CA",
      "postal_code": "94105",
      "country": "USA"
    },
    "company": {
      "name": "Example Corp",
      "id": "67890",
      "industry": "Technology",
      "employee_count": 250,
      "plan": "Pro"
    },
    "createdAt": "2020-01-01T12:00:00Z"
  }
}
```
